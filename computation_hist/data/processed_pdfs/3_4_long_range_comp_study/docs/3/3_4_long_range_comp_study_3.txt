MASSACHUSETTS INSTITUTE OF TECHNOLOGY

Memo to.
he Lo he preonel dhaft of The

= 4 we deen Sing oy 7
a: ol ALR rd Ata Ts c platy JUL ye Aie on


May 2, 1961

RPQ E 072901
SPECIFICATIONS FOR A MULTYPROGRAMMING PACKAGE FOR THE 7090 SYSTEM

This feature performs two (2) relatively independent functions
for the 7030 which are required for efficient multiprogramning
or time-sharing of the system. They are: sutomatic relocation
and variable bounds memory protecticn., Both functions are
provided without extending the execution time of any 7030
instruction.

1. AUTOMATIC RELOCATION

A seven bit register (relocation register) is provided.
When in the relocation mode, these seven bite are added
to the high order 7 bits of all memory addresses,
including '1l' cycles, generated by the CPU. A program,
therefore, written to execute in a particular set of
storage locations can be moved along with its data to any
other location {the increment of course being a power of
256) and executed there.

Two instructions are provided:
1) Set Relocation Mode ¥

Execution of this instruction will place bits 21-27
of ¥ into the relocation register and enter the
"relocation mode. The instruction is indexable and
indirectly addressable. Relocation will not take
piace untill the Instruction following the SRM has been
executed. Also, no I/0 traps can occur between SRM and
the instruction following. * Execution of any trap
will take the CPU out of the relocation mode, If the
CPU is in the relocation mode; a) all traps will inhibit
1/0 traps until restored or enabled, aml b) execution
of the interval timer traps (RPQ E89340) will store a
19 in position 17 of location 6.

2) Store Relocation Indicators V

Execution of this instruction will store the relocation
register in positions 21-27 of ¥. If in the relocation
mode, a "1" will be stored in position "1" of ¥Y. The
instruction is indexable and indirectly addressable.


Ll

VARIABLE BZUNDS MEMORY PROTECTION
A = ES St V5 BUI BE Ere oe tele dinero

Two preristers are provided, designated the Lower and

Uppe- Registers, When in the protection mode, any ¢Py

c-°rated memory address, including "1" cycles, 1s compared

-galnst these two registers. The comparison is made after

relocation, if any. If the address is less than the CORN-=
tents of the lower register or greater than the contents
of the Upper register, a trap is generated, storing the
actual (unrelocated) value of the instruction counter

in location 32 ang transferring control to location 33,
The execution of the instruction causing the trap is
blocked. In addition, execution of any trap will take
the CPU out of both the protection ang relocation mode,
leaving the contents of the registers unchanged.

Two instructions are provided:

1) Set Protection Mode V

Execution of this instruction will place bits 3-9

and 21-27 of Y into the Upper and Lower register,
respectively. In addition, the CPU is placed in the
protection mode. The protect mode, however, does not
become effective until after the instruction following
Che SPM has been executed. In addition, no I/0 traps
Hay occur between the SPM and the instruction following. *
The instruction is indexable and indirectly addressable.

2) Store Protection Indicators Y

Execution of this instruction will place the contents

of the Upper and Lower Registers in positions 3-9 and
21-27 of ¥, respectively. If in the Protection Mode,

a2 "1" will be stored in position 2 of ¥Y. The instruction
is indexable and indirectly addressable.

Trapp ng

When in the protection mode, execution of the following
instructions will cause a trap:

Set Protect Mode

Set Relocation Mode

ENB, RCT, RDC, RICH, LCH. TEFn TRCn,
RUN, SDN. “Alo Wer: BSF, BSR, ‘RW, °
ADS, WRS, 1-0 Sense, RTT, EOT. BOT,
ECTM, ESNT, YOT, LTM.


II. Trapping (continued)

- Transfer type instructions that violate the bounds as
such are not trapped. However, as mentioned above, all
"1" cycles are checked so a trap will occur on the first
instruction after a transfer that violates the bounds.

A "1" is put into position 17 of location 32 when this
occurs, |

* The effective delay in execution and protection against
I/0 Traps is extended if the instruction following also
provides a one instruction grace period. It is expected
that a normal exit from the monitor will be: |

ENB A
SPM B
SRM C
TRA® 32

until
No I/0 traps will occur/after the TRA has been executed.
The protection and relocation will begin on the"1" cycle
following the TRA.

J. E. Ewing
Special Systems Planning
May 2, 1961


