MASSACHUSETTS INSTIT TE OF TECHNOLOGY

7

.4 M z/iz VIM/cryirﬁ/ Céz;%z* 1% 751%
{PM mm“; ,wuut’ 73 ,U4 A} //5’ ’77 «

7' 1/ , , V
(17,3025 ﬁlmy, Mtg/ﬁg, (KL/{IVIMl/(lébag/ 17

{L Ky ﬂ/a/a/La ” «LIE: ’yLﬁzL/ )z/‘(ﬁ/zx/an4w

from

 

mun” BusYoN


RPQ E 02221

SPECIEICATIONS FOR A MULTIPROGRAMMING PACKAGE FOR THE 2020 SYSTEM

This feature performs two (2) relatively independent functions
for the 7090 which are required for efficient mnltiprogramming
or time—sharing of the systemo They are: automatic relocation
and variable bounds memory protection° Both functions are
provided without extending the execution time of any 7090
instruction.

In AUTOMATIC RELOCATION

 

A seven bit register (relocation register) is provided.
When in the relocation mode: these seven bits are added
to the high order 7 bits of all memory addresses,
including “1" cycles” generated by the CPU. A program”
therefore» written to execute in a particular set of
storage locations can be moved along with its data to any
other location (the increment of couroe being a power of
256) and executed there.

Two instructions are provided:
1) Set Relocation Mode ”1

Execution of this instruction will place bits 21:27
of Y into the relocation register and enter the

” relocation modeo The instruction is indexable and
indirectly addressableo Relocation will not take
place until the instruction following the SRM has been
exeentedo Alsog no I/O trage can oocur between SRM and
the instruction followinga * Execution of any trap
militake the CPU out of the relocation modeq If the
CPU is in the relocation mode; a) all traps will inhibit
1/0 traps until restored or enable and b) execution
of the interval timer traps (RPQ E . 9? will store a
“l“ in position 17 of location 6‘

   

 

2) Store Reloaetion Indieatore Y

     

Execution of this instrt n m‘ ”
regiater in positions 21 27 of the relocation
mode» a ”A" will be cred in p01 tion “1" of Y“ The
instruction is indexable and indirectly addreseablev

the relocation


‘IIu

 

VARIABLE BCUNDS MEMORY PROTECTION
___~_._i.._——._—__—______i_______

Two rcyrsters are provided, designated the Lower and

Unpe‘ Registers. When in the protection mode, any CPU
4g;.erated memory address, including "1" cycles, is compared
iaainst these two registers. The comparison is made after
relocation, if any» If the address is less than the con«
tents of the lower register or greater than the contents
of the Upper register, a trap is generated, storing the
actual (unrelocated) value of the instruction counter

in location 32 and transferring control to location 33.
The execution of the instruction causing the trap is
blocked. In addition, execution of any trap will take

the CPU out of both the protection and relocation mode,
leaving the contents of the registers unchanged.

Two instructions are provided:
ml) Set Protection Mode Y

Execution of this instruction will place bits 3=9

and 21=27 of Y into the Upper and Lower register,
Peepectively. In addition, the CPU is placed in the
protection mode. The protect mode, however, does not
become effective until after the instruction following
the SPM has been executed. In addition, no I/b traps
may Occur between the SPM and the instruction following.*
The instruction is indexable and indirectly addressable.

2) Store Protection Indicators Y

Execution of this instruction will place the contents

of the Upper and Lower Registers in positions 3=9 and
21e27 of Y3 respectively. If in the Protection Mode,

3 "1" will be stored in position 2 of Y0 The instruction
is indexable and indirectly addressablen

Trapping

When in the protection mode? execution of the following
instructions will cause a trap:

Set Protect Mode

Set Relocation Mode

ans RCTm soc RLCH. LCH. TEFn TRan
RUN: son; Aiéo was; ESE; BSR,gREh
EDS, WRSW luO Senseg RTT, EDT? BOTy
ECTMB ssm'a IOTk LTMc


II. Traggigg (cnntinued)

Transfer type instructions that violate the bounds as
such are not trapped. However, as mentioned above, all
"1" cycles are checked so a trap will occur on the first
instruction after a transfer that violates the bounds.

A "1" is put into position 17 of location 32 when this
occurs.

‘ The effective delay in execution and protection against
I/b Traps is extended if the instruction following also
provides a one instruction grace period. It is expected
that a normal exit from the monitor will be:

ENE A
SPM B
SRM C
TRAa 32

until
N0 I/b traps will occur/after the TEA has been executed.
The protection and relocation will begin on the"1“ cycle
following the TRAa

Jo Ec Ewing
Special Systems Planning
May 2, 1961


